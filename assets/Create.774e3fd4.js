import{c as V,a as L,b as j,o as W}from"./index.esm.649fd59a.js";import{M as P}from"./MyCheckbox.f2e368bd.js";import{M as Y,a as H}from"./MyDateRangePicker.9bf8c213.js";import{M as A}from"./MySelect.c814ee28.js";import{r as J,u as X,a7 as Z,j as n,a,M as G,ac as _,B as z}from"./index.e5d80a55.js";import{P as ee,M as ae,a as d}from"./MyDivider.9f45eeca.js";import{L as u}from"./LabelledCaption.19e76a03.js";import{u as x,K as p,U as h}from"./url.1178bcbf.js";import{u as se}from"./usePostQuery.56c363fc.js";import{u as le,C as T}from"./index.esm.746166b2.js";const he=()=>{var C,w,M,E,k,B;const[g,m]=J.exports.useState([]),{t:l}=X(),N=Z(),$=[{label:l("Employees"),url:"#"}],{data:y}=x({key:p.getPolicyList,url:h.getPolicyList,params:{}}),{data:c}=x({key:p.getEmployeeList,url:h.getEmployeeList,params:{}}),{data:f}=x({key:p.getListOrganizationSelf,url:h.getListOrganizationSelf,params:{}}),O=V().shape({name:L().required(),description:L(),organizationId:j(),policyId:j()}),{handleSubmit:q,register:S,control:v,reset:K,formState:{errors:t}}=le({defaultValues:{},mode:"onChange",resolver:W(O)}),{mutate:D}=se({listKeyId:p.getEmployeeGroups,hideSuccessToast:!0}),Q=e=>{const o={employees:g,...e};D({url:h.getEmployeeGroups,attributes:o},{onSuccess:()=>{z.success(l("Successfully created!")),K(),N("/employee-group")},onError:s=>{var r,i,I;console.log(s),z.error((I=(i=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:i.error)==null?void 0:I.message)}})},b=((C=c==null?void 0:c.data)==null?void 0:C.map(e=>e==null?void 0:e.id))||[],U=e=>{m(e?b:[])},F=(e,o)=>{m(o?s=>[...s,e]:s=>s.filter(r=>r!==e))},R=b.length>0&&g.length===b.length;return n(ee,{children:[n("div",{className:"flex flex-col",children:[a("h1",{className:"headers-core text-text-base dark:text-text-title-dark",children:l("Add new employee")}),a(ae,{items:$})]}),a(d,{}),a(G,{onClick:()=>N("/employee-group"),variant:"secondary",startIcon:a(_,{}),children:l("Back to employees list")}),a(d,{}),n("form",{className:"max-w-5xl",onSubmit:q(Q),children:[n("div",{className:"mb-12 flex w-full items-start justify-between",children:[a(u,{className:"flex-1",title:l("Group name"),subtitle:l("Short and easy-to-understand name")}),a(Y,{rootClassName:"max-w-[462px]",placeholder:l("Enter group name"),...S("name"),error:Boolean((w=t==null?void 0:t.name)==null?void 0:w.message),helperText:l(`${(M=t==null?void 0:t.name)==null?void 0:M.message}`)})]}),n("div",{className:"mb-12 flex w-full items-start justify-between",children:[a(u,{className:"flex-1",title:l("Group name"),subtitle:l("Short description describing this collection")}),a(H,{rootClassName:"max-w-[462px]",placeholder:l("Enter group description"),...S("description"),error:Boolean((E=t==null?void 0:t.description)==null?void 0:E.message),helperText:l(`${(k=t==null?void 0:t.description)==null?void 0:k.message}`)})]}),n("div",{className:"mb-12 flex w-full items-start justify-between",children:[a(u,{className:"flex-1",title:l("Organization"),subtitle:l("")}),a("div",{className:"w-[462px]",children:a(T,{name:"organizationId",control:v,render:({field:e,fieldState:o})=>a(A,{options:f==null?void 0:f.map(s=>({label:s.fullName,value:s.id})),placeholder:"Select organization",value:e.value,onChange:s=>{var r;return e.onChange(Number((r=s==null?void 0:s.value)!=null?r:s))},onBlur:e.onBlur,error:!!o.error,required:!0})})})]}),n("div",{className:"mb-12 flex w-full items-start justify-between",children:[a(u,{className:"flex-1",title:l("Policy"),subtitle:l("")}),a("div",{className:"w-[462px]",children:a(T,{name:"policyId",control:v,render:({field:e,fieldState:o})=>{var s;return a(A,{options:(s=y==null?void 0:y.data)==null?void 0:s.map(r=>({label:r.title,value:r.id})),placeholder:"Select policy",value:e.value,onChange:r=>{var i;return e.onChange(Number((i=r==null?void 0:r.value)!=null?i:r))},onBlur:e.onBlur,error:!!o.error,required:!0})}})})]}),a(d,{className:"mb-3xl"}),a(u,{title:l("Add employees to group"),subtitle:l("Short description describing this collection")}),a(d,{className:"mb-3xl"}),n("div",{className:"border p-4 rounded-lg",children:[n("div",{className:"grid grid-cols-3 w-full",children:[a("div",{className:"flex items-center gap-2",children:a(P,{checked:R,onChange:e=>U(e),label:"Employee"})}),a("div",{children:"Department"}),a("div",{children:"Phone"})]}),a(d,{}),(B=c==null?void 0:c.data)==null?void 0:B.map(e=>{var o;return n("div",{className:"grid grid-cols-3 my-6 w-full",children:[a("div",{children:a(P,{label:e==null?void 0:e.name,checked:g.includes(e==null?void 0:e.id),onChange:s=>F(e==null?void 0:e.id,s)})}),a("div",{children:(o=e==null?void 0:e.department)==null?void 0:o.shortName}),a("div",{children:e==null?void 0:e.phone})]},e==null?void 0:e.id)})]}),a("div",{className:"flex justify-end mt-4",children:a(G,{type:"submit",variant:"primary",children:l("Create")})})]})]})};export{he as default};
