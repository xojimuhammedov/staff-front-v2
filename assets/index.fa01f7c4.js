import{P as q,M as Q,a as F}from"./MyDivider.9f45eeca.js";import{u as I,j as o,a as e,i as V,P as U,k as G,N as R,M as g,c as W,S as Y,T as H,B as A,r as _,l as d,m as J,n as X,o as Z,p as j}from"./index.e5d80a55.js";import{M as ee}from"./MyBadge.4a72dd55.js";import{K as E,U as $,u as ae}from"./url.1178bcbf.js";import{u as te,M as se,C as le}from"./Pagination.4bfa72ff.js";import{u as ne}from"./useGetOneQuery.b7db22b1.js";import{M as c}from"./MyDateRangePicker.9bf8c213.js";import{u as K}from"./index.esm.746166b2.js";import{c as oe,a as P,o as ie}from"./index.esm.649fd59a.js";import{u as re}from"./usePostQuery.56c363fc.js";import{u as de}from"./usePutQuery.9abfc37d.js";import{K as ce}from"./key-type.enum.09acb669.js";import{u as me}from"./useSearch.ac935cfb.js";import{p as he}from"./helper.f810761f.js";import"./MySelect.c814ee28.js";const pe=({item:t,setOpen:x,setOrganizationId:l,setShow:b})=>{var i,r;const{t:n}=I();return o("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 gap-2",children:[o("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-xl font-inter font-medium dark:text-text-title-dark",children:t==null?void 0:t.fullName}),e(ee,{variant:"green",children:n("Active")})]}),o("div",{className:"grid grid-cols-2 gap-2 my-4",children:[o("div",{className:"rounded-lg bg-[#F9FAFB] p-3",children:[e("h5",{className:"text-sm",children:n("Departments")}),e("h3",{className:"text-2xl font-inter font-bold dark:text-text-title-dark",children:(i=t==null?void 0:t._count)==null?void 0:i.departments})]}),o("div",{className:"rounded-lg bg-[#F9FAFB] p-3",children:[e("h5",{className:"text-sm",children:n("Employees")}),e("h3",{className:"text-2xl font-inter font-bold dark:text-text-title-dark",children:(r=t==null?void 0:t._count)==null?void 0:r.employees})]})]}),o("div",{className:"flex items-center gap-2",children:[e(V,{width:"16px"}),e("p",{children:t==null?void 0:t.address})]}),o("div",{className:"flex items-center gap-2 mt-2",children:[e(U,{width:"16px"}),e("p",{children:t==null?void 0:t.phone})]}),o("div",{className:"flex items-center gap-2 mt-2",children:[e(G,{width:"16px"}),e("p",{children:t==null?void 0:t.email})]}),o("div",{className:"flex items-center gap-2 mt-2",children:[e(R,{width:"16px"}),e("p",{children:t==null?void 0:t.additionalDetails})]}),o("div",{className:"flex items-center justify-between mt-4",children:[e(g,{variant:"secondary",className:"w-[170px]",startIcon:e(W,{}),children:n("View")}),e(g,{variant:"secondary",className:"w-[170px]",onClick:()=>{b(!0),l(t==null?void 0:t.id)},startIcon:e(Y,{}),children:n("Edit")}),e(g,{onClick:()=>{x(!0),l(t==null?void 0:t.id)},variant:"secondary",startIcon:e(H,{color:"red"})})]})]})},ue=({refetch:t,onClose:x})=>{var T,p,m,y,f,u,v,S,z,O,N,h;const{t:l}=I(),b=oe().shape({fullName:P().required(),shortName:P().required(),email:P(),address:P(),additionalDetails:P(),phone:P()}),{handleSubmit:n,register:i,reset:r,formState:{errors:a}}=K({defaultValues:{},mode:"onChange",resolver:ie(b)}),{mutate:s}=re({listKeyId:E.getAllListOrganization,hideSuccessToast:!0});return e("div",{className:"p-4",children:o("form",{onSubmit:n(D=>{s({url:$.getAllListOrganization,attributes:D},{onSuccess:()=>{A.success(l("Successfully created!")),r(),t(),x()},onError:B=>{var k,C,M;console.log(B),A.error((M=(C=(k=B==null?void 0:B.response)==null?void 0:k.data)==null?void 0:C.error)==null?void 0:M.message)}})}),action:"",children:[o("div",{className:"grid grid-cols-2 gap-4",children:[e(c,{...i("fullName"),error:Boolean((T=a==null?void 0:a.fullName)==null?void 0:T.message),helperText:l(`${(p=a==null?void 0:a.fullName)==null?void 0:p.message}`),label:l("Organization full name")}),e(c,{...i("shortName"),error:Boolean((m=a==null?void 0:a.shortName)==null?void 0:m.message),helperText:l(`${(y=a==null?void 0:a.shortName)==null?void 0:y.message}`),label:l("Organization short name")}),e(c,{...i("email"),error:Boolean((f=a==null?void 0:a.email)==null?void 0:f.message),helperText:l(`${(u=a==null?void 0:a.email)==null?void 0:u.message}`),label:l("Organization email"),type:"email"}),e(c,{...i("address"),error:Boolean((v=a==null?void 0:a.address)==null?void 0:v.message),helperText:l(`${(S=a==null?void 0:a.address)==null?void 0:S.message}`),label:l("Organization address")}),e(c,{...i("additionalDetails"),error:Boolean((z=a==null?void 0:a.additionalDetails)==null?void 0:z.message),helperText:l(`${(O=a==null?void 0:a.additionalDetails)==null?void 0:O.message}`),label:l("Organization details")}),e(c,{...i("phone"),error:Boolean((N=a==null?void 0:a.phone)==null?void 0:N.message),helperText:l(`${(h=a==null?void 0:a.phone)==null?void 0:h.message}`),type:"tel",placeholder:"+998 (_ _)  _ _ _  _ _  _ _",label:l("Phone number")})]}),o("div",{className:"mt-2 flex w-full justify-end gap-4",children:[e(g,{type:"submit",variant:"primary",children:l("Submit")}),o(g,{onClick:()=>{x(),r()},variant:"secondary",children:[" ",l("Close")]})]})]})})},ge=({onClose:t,refetch:x,data:l,organizationId:b})=>{var p,m,y,f,u,v,S,z,O,N,h,D;const{t:n}=I(),{handleSubmit:i,register:r,reset:a,formState:{errors:s}}=K({defaultValues:_.exports.useMemo(()=>({fullName:d.exports.get(l,"data.fullName"),shortName:d.exports.get(l,"data.shortName"),email:d.exports.get(l,"data.email"),address:d.exports.get(l,"data.address"),additionalDetails:d.exports.get(l,"data.additionalDetails"),phone:d.exports.get(l,"data.phone")}),[l]),mode:"onChange"});_.exports.useEffect(()=>{a({fullName:d.exports.get(l,"data.fullName"),shortName:d.exports.get(l,"data.shortName"),email:d.exports.get(l,"data.email"),address:d.exports.get(l,"data.address"),additionalDetails:d.exports.get(l,"data.additionalDetails"),phone:d.exports.get(l,"data.phone")})},[l]);const{mutate:w}=de({listKeyId:E.getAllListOrganization,hideSuccessToast:!0});return e("div",{className:"p-4",children:o("form",{onSubmit:i(B=>{w({url:`${$.getAllListOrganization}/${b}`,attributes:B},{onSuccess:()=>{A.success(n("Edit successfully!")),a(),x(),t()},onError:k=>{var C,M,L;console.log(k),A.error((L=(M=(C=k==null?void 0:k.response)==null?void 0:C.data)==null?void 0:M.error)==null?void 0:L.message)}})}),action:"",children:[o("div",{className:"grid grid-cols-2 gap-4",children:[e(c,{...r("fullName"),error:Boolean((p=s==null?void 0:s.fullName)==null?void 0:p.message),helperText:n(`${(m=s==null?void 0:s.fullName)==null?void 0:m.message}`),label:n("Organization full name")}),e(c,{...r("shortName"),error:Boolean((y=s==null?void 0:s.shortName)==null?void 0:y.message),helperText:n(`${(f=s==null?void 0:s.shortName)==null?void 0:f.message}`),label:n("Organization short name")}),e(c,{...r("email"),error:Boolean((u=s==null?void 0:s.email)==null?void 0:u.message),helperText:n(`${(v=s==null?void 0:s.email)==null?void 0:v.message}`),label:n("Organization email"),type:"email"}),e(c,{...r("address"),error:Boolean((S=s==null?void 0:s.address)==null?void 0:S.message),helperText:n(`${(z=s==null?void 0:s.address)==null?void 0:z.message}`),label:n("Organization address")}),e(c,{...r("additionalDetails"),error:Boolean((O=s==null?void 0:s.additionalDetails)==null?void 0:O.message),helperText:n(`${(N=s==null?void 0:s.additionalDetails)==null?void 0:N.message}`),label:n("Organization details")}),e(c,{...r("phone"),error:Boolean((h=s==null?void 0:s.phone)==null?void 0:h.message),helperText:n(`${(D=s==null?void 0:s.phone)==null?void 0:D.message}`),type:"tel",placeholder:"+998 (_ _)  _ _ _  _ _  _ _",label:n("Phone number")})]}),o("div",{className:"mt-2 flex w-full justify-end gap-4",children:[e(g,{type:"submit",variant:"primary",children:n("Submit")}),o(g,{onClick:()=>{t(),a()},variant:"secondary",children:[" ",n("Close")]})]})]})})},xe=()=>{var N;const{t}=I(),x=J(),l=he(x.search),{search:b,setSearch:n,handleSearch:i}=me(),[r,a]=_.exports.useState(!1),[s,w]=_.exports.useState(!1),[T,p]=_.exports.useState(!1),[m,y]=_.exports.useState(null),{data:f,refetch:u}=ae({key:E.getAllListOrganization,url:$.getAllListOrganization,params:{search:l.search}}),v=[{label:t("Organization"),url:"#"}],{mutate:S}=te({listKeyId:E.getAllListOrganization}),z=()=>{S({url:`${$.getAllListOrganization}/${m}`},{onSuccess:()=>{u(),w(!1)}})},{data:O}=ne({id:m,url:$.getAllListOrganization,params:{},enabled:!!m});return o(q,{paginationProps:e(se,{total:d.exports.get(f,"total")}),children:[o("div",{className:"flex flex-col",children:[e("h1",{className:"headers-core dark:text-text-title-dark text-text-base",children:t("Organization")}),e(Q,{items:v})]}),e(F,{}),o("div",{className:"flex items-center justify-between",children:[e(c,{onKeyUp:h=>{h.key===ce.enter?i():n(h.target.value)},defaultValue:b,startIcon:e(X,{className:"stroke-text-muted",onClick:i}),className:"w-[300px] dark:bg-bg-input-dark",placeholder:t("Search...")}),o("div",{className:"flex items-center gap-4",children:[e(g,{startIcon:e(Z,{}),onClick:()=>a(!0),variant:"primary",className:"[&_svg]:stroke-bg-white text-sm w-[200px] dark:text-text-base",children:t("Add Organization")}),e(g,{variant:"secondary",children:t("Filters")})]})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:(N=d.exports.get(f,"data"))==null?void 0:N.map(h=>e(pe,{setOrganizationId:y,setShow:p,setOpen:w,item:h}))}),e(F,{}),e(j,{modalProps:{show:Boolean(r),onClose:()=>{a(!1)}},headerProps:{children:e("h2",{className:"text-xl font-semibold",children:t("Create new organization")}),className:"px-6"},bodyProps:{children:e(ue,{refetch:u,onClose:()=>a(!1)})}}),e(le,{title:t("Bu tashkilotni o'chirmoqchimisiz?"),subTitle:t("Bu amalni qaytarib bo'lmaydi!"),open:s,setOpen:w,confirmationDelete:z}),e(j,{modalProps:{show:Boolean(T),onClose:()=>{p(!1)}},headerProps:{children:e("h2",{className:"text-xl font-semibold",children:t("Edit organization")}),className:"px-6"},bodyProps:{children:e(ge,{organizationId:m,data:O,refetch:u,onClose:()=>p(!1)})}})]})},Me=xe;export{Me as default};
