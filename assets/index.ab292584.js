import{a as b,P as R,M as V}from"./MyDivider.9f45eeca.js";import{u as P,r as c,ad as W,a7 as $,a8 as Y,l as r,j as l,U,a,ab as H,M as j,p as J,aa as X,B as k,ac as Z}from"./index.e5d80a55.js";import{M as u}from"./MyDateRangePicker.9bf8c213.js";import{M as _}from"./MySelect.c814ee28.js";import{u as ee,K as F,U as y}from"./url.1178bcbf.js";import{u as ae}from"./usePutQuery.9abfc37d.js";import{u as te}from"./useGetOneQuery.b7db22b1.js";import{u as se,C as re}from"./index.esm.746166b2.js";function oe(){var N,S,v,C,E,I,M,B,D,w;const{t}=P(),[x,g]=c.exports.useState(!1),{id:h}=W(),A=$(),[L,ne]=c.exports.useState(!1),[T,de]=c.exports.useState(),{getProcessedImage:ie,setImage:K,resetStates:me}=Y(),Q=async({target:{files:n}})=>{const d=n&&n[0],i=await X(d);K(i),g(!0)},{data:G}=ee({key:F.getAllListDepartment,url:y.getAllListDepartment,params:{}}),{data:s}=te({id:h,url:y.getEmployeeList,params:{},enabled:!!h}),{handleSubmit:O,register:m,control:q,reset:f,formState:{errors:e}}=se({defaultValues:c.exports.useMemo(()=>({name:r.exports.get(s,"data.name"),email:r.exports.get(s,"data.email"),phone:r.exports.get(s,"data.phone"),additionalDetails:r.exports.get(s,"data.additionalDetails"),address:r.exports.get(s,"data.address"),departmentId:r.exports.get(s,"data.departmentId")}),[s]),mode:"onChange"});c.exports.useEffect(()=>{f({name:r.exports.get(s,"data.name"),email:r.exports.get(s,"data.email"),phone:r.exports.get(s,"data.phone"),additionalDetails:r.exports.get(s,"data.additionalDetails"),address:r.exports.get(s,"data.address"),departmentId:r.exports.get(s,"data.departmentId")})},[s]);const{mutate:z}=ae({listKeyId:F.getEmployeeList,hideSuccessToast:!0});return l(U,{children:[l("form",{onSubmit:O(n=>{z({url:`${y.getEmployeeList}/${h}`,attributes:n},{onSuccess:()=>{k.success(t("Successfully edited!")),f(),A("/employees")},onError:d=>{var i,o,p;console.log(d),k.error((p=(o=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:o.error)==null?void 0:p.message)}})}),children:[l("div",{className:"w-2/3 flex justify-between",children:[l("div",{className:"grid grid-cols-2 gap-4 w-3/4",children:[a(u,{...m("name"),error:Boolean((N=e==null?void 0:e.name)==null?void 0:N.message),helperText:t(`${(S=e==null?void 0:e.name)==null?void 0:S.message}`),label:t("User name")}),a(u,{...m("address"),error:Boolean((v=e==null?void 0:e.address)==null?void 0:v.message),helperText:t(`${(C=e==null?void 0:e.address)==null?void 0:C.message}`),label:t("User address")}),a(u,{...m("phone"),error:Boolean((E=e==null?void 0:e.phone)==null?void 0:E.message),helperText:t(`${(I=e==null?void 0:e.phone)==null?void 0:I.message}`),label:t("User phone number")}),a(u,{...m("email"),error:Boolean((M=e==null?void 0:e.email)==null?void 0:M.message),helperText:t(`${(B=e==null?void 0:e.email)==null?void 0:B.message}`),label:t("User email")}),a(u,{...m("additionalDetails"),error:Boolean((D=e==null?void 0:e.additionalDetails)==null?void 0:D.message),helperText:t(`${(w=e==null?void 0:e.additionalDetails)==null?void 0:w.message}`),label:t("User details")}),a(re,{name:"departmentId",control:q,render:({field:n,fieldState:d})=>{var i;return a(_,{label:t("Select department"),options:(i=r.exports.get(G,"data"))==null?void 0:i.map(o=>({label:o.fullName,value:o.id})),value:n.value,onChange:o=>{var p;return n.onChange(Number((p=o==null?void 0:o.value)!=null?p:o))},onBlur:n.onBlur,error:!!d.error})}})]}),l("div",{className:"cursor-pointer",children:[l("p",{className:"font-inter text-base font-medium leading-5 dark:text-text-title-dark",children:[t("Avatar image")," ",a("span",{className:"text-red-500",children:"*"})]}),a("div",{className:"mt-2 flex h-[160px] w-[150px] items-center justify-center border-2 bg-[#F9FAFB]",children:a("label",{className:"cursor-pointer",children:a("img",{className:"h-[160px] w-[150px] object-cover",src:T})})}),a("input",{type:"file",onChange:Q,className:"hidden",id:"avatarInput",accept:"image/*"}),l("label",{htmlFor:"avatarInput",className:"mt-6 flex h-[32px] cursor-pointer items-center justify-center gap-2 rounded-md border border-solid border-gray-300 px-[6px] py-[6px]  text-xs font-medium text-gray-700 shadow-sm dark:text-text-title-dark",children:[a(H,{})," ",t("Upload image")]}),L&&a("p",{className:"text-red-500",children:t("Image is required")})]})]}),a(b,{}),a(j,{type:"submit",className:"mt-3",variant:"primary",children:t("Add & Save")})]}),a(J,{modalProps:{show:Boolean(x),onClose:()=>g(!1),size:"md"},headerProps:{children:a("h2",{className:"text-gray-800",children:t("Edit profile picture")})},bodyProps:{children:a(U,{})}})]})}const le=()=>{const{t}=P(),x=$(),g=[{label:t("Employees"),url:"#"}];return l(R,{children:[l("div",{className:"flex flex-col",children:[a("h1",{className:"headers-core text-text-base dark:text-text-title-dark",children:t("Edit employee")}),a(V,{items:g})]}),a(b,{}),a(j,{onClick:()=>x("/employees"),variant:"secondary",startIcon:a(Z,{}),children:t("Back to employees list")}),a(b,{}),a(oe,{})]})},Ne=le;export{Ne as default};
