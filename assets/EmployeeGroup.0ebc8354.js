import{M as y}from"./MyCheckbox.f2e368bd.js";import"./MyDateRangePicker.9bf8c213.js";import{r as j,u as M,m as A,a7 as B,j as t,a as s,M as D,B as f}from"./index.e5d80a55.js";import{a as K}from"./MyDivider.9f45eeca.js";import{L as T}from"./LabelledCaption.19e76a03.js";import{u as w,K as g,U as S}from"./url.1178bcbf.js";import{u as G}from"./usePostQuery.56c363fc.js";import{u as O}from"./index.esm.746166b2.js";import{p as P}from"./helper.f810761f.js";const W=()=>{var p,h;const[d,a]=j.exports.useState([]),{t:c}=M(),b=A(),v=B(),u=P(b.search),{data:l}=w({key:g.getEmployeeList,url:S.getEmployeeList,params:{}}),{handleSubmit:N,reset:x,formState:{errors:Q}}=O({defaultValues:{},mode:"onChange"}),{mutate:k}=G({listKeyId:g.employeeBulk,hideSuccessToast:!0}),C=()=>{const e={policyId:Number(u==null?void 0:u.policyId),employeeIds:d};k({url:S.employeeBulk,attributes:e},{onSuccess:()=>{f.success(c("Successfully created!")),x(),v("/policy")},onError:o=>{var r,n,m;console.log(o),f.error((m=(n=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:n.error)==null?void 0:m.message)}})},i=((p=l==null?void 0:l.data)==null?void 0:p.map(e=>e==null?void 0:e.id))||[],E=e=>{a(e?i:[])},I=(e,o)=>{a(o?r=>[...r,e]:r=>r.filter(n=>n!==e))},L=i.length>0&&d.length===i.length;return t("form",{onSubmit:N(C),children:[s(T,{title:c("Add employees to group"),subtitle:c("Short description describing this collection")}),t("div",{className:"border p-4 mt-8 rounded-lg",children:[t("div",{className:"grid grid-cols-3 w-full",children:[s("div",{className:"flex items-center gap-2",children:s(y,{checked:L,onChange:e=>E(e),label:"Employee"})}),s("div",{children:"Department"}),s("div",{children:"Phone"})]}),s(K,{}),(h=l==null?void 0:l.data)==null?void 0:h.map(e=>{var o;return t("div",{className:"grid grid-cols-3 my-6 w-full",children:[s("div",{children:s(y,{label:e==null?void 0:e.name,checked:d.includes(e==null?void 0:e.id),onChange:r=>I(e==null?void 0:e.id,r)})}),s("div",{children:(o=e==null?void 0:e.department)==null?void 0:o.shortName}),s("div",{children:e==null?void 0:e.phone})]},e==null?void 0:e.id)})]}),s("div",{className:"flex justify-end mt-4",children:s(D,{type:"submit",variant:"primary",children:c("Create")})})]})};export{W as default};
