import{a as p,P as F,M as K}from"./MyDivider.9f45eeca.js";import{u as T,r as d,l as r,a as s,U as L,j as u,E as N,c as B,M as I,B as k,a7 as Q,ac as D}from"./index.e5d80a55.js";import{M as c}from"./MyDateRangePicker.9bf8c213.js";import{u as G,K as C,U as E}from"./url.1178bcbf.js";import{u as O}from"./usePutQuery.9abfc37d.js";import{u as R}from"./index.esm.746166b2.js";function V(){var g,x,f,h,P,y,b,S;const{t:a}=T(),[o,m]=d.exports.useState(!1),[i,$]=d.exports.useState(!1),{data:t}=G({key:C.getUsersMe,url:E.getUsersMe,params:{}}),{handleSubmit:j,register:n,reset:w,formState:{errors:e}}=R({defaultValues:d.exports.useMemo(()=>({name:r.exports.get(t,"name"),username:r.exports.get(t,"username"),currentPassword:r.exports.get(t,"currentPassword"),newPassword:r.exports.get(t,"newPassword")}),[t]),mode:"onChange"});d.exports.useEffect(()=>{w({name:r.exports.get(t,"name"),username:r.exports.get(t,"username"),currentPassword:r.exports.get(t,"currentPassword"),newPassword:r.exports.get(t,"newPassword")})},[t]);const{mutate:z}=O({listKeyId:C.getUsersMe,hideSuccessToast:!0});return s(L,{children:u("form",{onSubmit:j(A=>{z({url:E.getUsersMe,attributes:A},{onSuccess:()=>{k.success(a("Successfully edited!")),w()},onError:l=>{var M,U,v;console.log(l),k.error((v=(U=(M=l==null?void 0:l.response)==null?void 0:M.data)==null?void 0:U.error)==null?void 0:v.message)}})}),children:[s("div",{className:"w-2/3 flex justify-between",children:u("div",{className:"grid grid-cols-2 gap-4 w-3/4",children:[s(c,{...n("name"),error:Boolean((g=e==null?void 0:e.name)==null?void 0:g.message),helperText:a(`${(x=e==null?void 0:e.name)==null?void 0:x.message}`),label:a("User name")}),s(c,{...n("username"),error:Boolean((f=e==null?void 0:e.username)==null?void 0:f.message),helperText:a(`${(h=e==null?void 0:e.username)==null?void 0:h.message}`),label:a("User address")}),s(c,{...n("currentPassword"),error:Boolean((P=e==null?void 0:e.currentPassword)==null?void 0:P.message),helperText:a(`${(y=e==null?void 0:e.currentPassword)==null?void 0:y.message}`),label:a("User current password"),type:o?"text":"password",endIcon:s("div",{className:"cursor-pointer text-gray-400",onClick:()=>m(!o),children:o?s(N,{size:18}):s(B,{size:18})})}),s(c,{...n("newPassword"),error:Boolean((b=e==null?void 0:e.newPassword)==null?void 0:b.message),helperText:a(`${(S=e==null?void 0:e.newPassword)==null?void 0:S.message}`),label:a("User new password"),type:i?"text":"password",endIcon:s("div",{className:"cursor-pointer text-gray-400",onClick:()=>$(!i),children:i?s(N,{size:18}):s(B,{size:18})})})]})}),s(p,{}),s(I,{type:"submit",className:"mt-3",variant:"primary",children:a("Add & Save")})]})})}const W=()=>{const{t:a}=T(),o=Q(),m=[{label:a("User"),url:"#"}];return u(F,{children:[u("div",{className:"flex flex-col",children:[s("h1",{className:"headers-core text-text-base dark:text-text-title-dark",children:a("Edit user profile")}),s(K,{items:m})]}),s(p,{}),s(I,{onClick:()=>o("/"),variant:"secondary",startIcon:s(D,{}),children:a("Back to page")}),s(p,{}),s(V,{})]})},ee=W;export{ee as default};
